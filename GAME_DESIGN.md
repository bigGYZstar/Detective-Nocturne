# 探偵ノクターン -銀の黄昏とアザゼルの鍵- ゲーム設計書 v0.1

## 🎮 ゲーム概要

### 基本情報
- **ジャンル**: ビジュアルノベル・アドベンチャーゲーム
- **対象年齢**: 18歳以上
- **プラットフォーム**: PC (Windows/Mac/Linux)
- **エンジン**: Godot 4.3
- **開発段階**: モックアップ v0.1

### コンセプト
探偵という職業を通じて描く、人間の心の闇と光の物語。表面的な事件の裏に隠された、深い人間ドラマと心理的な成長を描く18禁アドベンチャーゲーム。

## 🏗️ ゲーム構造設計

### シーン構成
```
Main.tscn (メインシーン)
├── UI/
│   ├── DialogSystem.tscn (ダイアログシステム)
│   ├── MenuSystem.tscn (メニューシステム)
│   └── SaveLoadSystem.tscn (セーブ・ロードシステム)
├── Characters/
│   ├── Mizuki.tscn (水島みずき)
│   ├── Saori.tscn (田村沙織)
│   ├── Ruri.tscn (一条瑠璃)
│   └── Others/ (その他キャラクター)
├── Backgrounds/
│   ├── DetectiveOffice.tscn (探偵事務所)
│   ├── TanakaBookstore.tscn (田中書店)
│   └── HasegawaAntiques.tscn (長谷川古美術)
└── Scenes/
    ├── Prologue.tscn (序章)
    ├── Chapter01.tscn (第一章)
    └── ... (各章)
```

### データ管理
```
GameData/
├── scenario_data.json (シナリオデータ)
├── character_data.json (キャラクターデータ)
├── save_data.json (セーブデータ)
└── config.json (設定データ)
```

## 🎭 キャラクター仕様

### 主要キャラクター

#### 1. 水島みずき（探偵）
- **立ち絵**: 5つの表情パターン（通常、笑顔、困惑、怒り、驚き）
- **衣装**: 探偵らしいスーツ姿
- **特徴**: 黒髪ショート、クールな美人

#### 2. 田村沙織（探偵助手）
- **立ち絵**: 5つの表情パターン（通常、微笑み、心配、恥ずかし、決意）
- **衣装**: 清楚なオフィススタイル
- **特徴**: 茶髪ロング、優しい印象、メガネなし

#### 3. 一条瑠璃（依頼人）
- **立ち絵**: 5つの表情パターン（通常、悲しみ、希望、混乱、覚醒）
- **衣装**: 上品なワンピース
- **特徴**: 銀髪ロング、透明感のある美少女

## 🎨 UI/UX設計

### ダイアログシステム
- **テキストボックス**: 半透明の黒背景、白文字
- **キャラクター名表示**: 左上に色分けされた名前表示
- **テキスト送り**: クリック・スペースキー・エンターキー
- **オートモード**: 自動テキスト送り機能
- **スキップ機能**: 既読テキストの高速スキップ

### メニューシステム
- **セーブ・ロード**: 10スロット対応
- **設定**: 音量調整、テキスト速度、フルスクリーン
- **バックログ**: 過去の会話履歴表示
- **CG鑑賞**: 解放されたCGの鑑賞モード

### 選択肢システム
- **分岐選択**: 物語の重要な分岐点での選択
- **好感度システム**: キャラクターとの関係性管理
- **フラグ管理**: ストーリー進行状況の管理

## 📱 技術仕様

### Godotプロジェクト設定
- **解像度**: 1920x1080 (16:9)
- **レンダラー**: Vulkan (Forward+)
- **オーディオ**: OGG Vorbis形式
- **画像**: PNG形式 (背景・立ち絵)

### ファイル構成
```
project.godot
├── scenes/
│   ├── Main.tscn
│   ├── ui/
│   ├── characters/
│   └── backgrounds/
├── scripts/
│   ├── GameManager.gd
│   ├── DialogSystem.gd
│   ├── SaveSystem.gd
│   └── ScenarioManager.gd
├── assets/
│   ├── images/
│   │   ├── characters/
│   │   ├── backgrounds/
│   │   └── ui/
│   ├── audio/
│   │   ├── bgm/
│   │   ├── se/
│   │   └── voice/
│   └── fonts/
└── data/
    ├── scenarios/
    ├── characters/
    └── saves/
```

## 🎵 オーディオ設計

### BGM
- **探偵事務所**: 落ち着いた日常系BGM
- **調査シーン**: 緊張感のあるミステリー系BGM
- **18禁シーン**: 官能的で心理的なBGM
- **クライマックス**: 壮大で感動的なBGM

### SE（効果音）
- **UI操作音**: クリック、選択、決定音
- **環境音**: 雨音、街の騒音、時計の音
- **演出音**: ドアの開閉、電話のベル、足音

## 🔞 18禁要素の実装

### シーン管理
- **年齢確認**: 起動時の年齢確認画面
- **コンテンツ警告**: 18禁シーン前の警告表示
- **スキップ機能**: 18禁シーンのスキップオプション
- **モザイク設定**: 地域に応じた表現調整

### 分岐システム
- **田中セクハラシーン**: みずきの選択による分岐
  - 分岐A: 介入成功ルート
  - 分岐B: 被害発生ルート
- **心理描写重視**: 直接的描写より心理的変化に焦点

## 🎯 モックアップv0.1の実装範囲

### 実装予定機能
1. **基本UI**: ダイアログシステム、メニュー
2. **キャラクター表示**: 主要3キャラクターの立ち絵
3. **シナリオ再生**: 序章の一部シーン
4. **セーブ・ロード**: 基本的なセーブ機能
5. **設定画面**: 音量・テキスト速度調整

### 実装しない機能（将来実装）
- 音声・BGM
- CG鑑賞モード
- 全章のシナリオ
- 18禁シーンの詳細実装
- エフェクト・演出

## 📊 開発スケジュール

### Phase 1: 基本システム構築
- Godotプロジェクト作成
- 基本UI実装
- ダイアログシステム実装

### Phase 2: キャラクター実装
- 立ち絵表示システム
- キャラクター切り替え
- 表情変更システム

### Phase 3: シナリオ実装
- シナリオデータ読み込み
- 序章の実装
- 選択肢システム

### Phase 4: 統合・テスト
- 全システムの統合
- バグ修正・調整
- GitHubへの同期

## 🔧 技術的考慮事項

### パフォーマンス
- **メモリ管理**: 立ち絵の動的ロード・アンロード
- **ファイルサイズ**: 画像の最適化
- **レスポンス**: UI操作の即座反応

### 拡張性
- **モジュラー設計**: 各システムの独立性
- **データ駆動**: JSONベースの設定管理
- **プラグイン対応**: 将来的な機能拡張への対応

### セキュリティ
- **セーブデータ**: 改ざん防止機能
- **18禁コンテンツ**: 適切なアクセス制御
- **ユーザーデータ**: プライバシー保護

---

この設計書に基づいて、探偵ノクターンのモックアップv0.1を実装していきます。
